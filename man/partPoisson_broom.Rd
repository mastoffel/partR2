% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/partPoisson_broom.R
\name{partPoisson_broom}
\alias{partPoisson_broom}
\title{Partition the R2 for Gaussian mixed models}
\usage{
partPoisson_broom(mod, partvars = NULL, R2_type = "marginal",
  nboot = NULL, CI = 0.95, link = c("log", "sqrt"),
  expect = "meanobs")
}
\arguments{
\item{mod}{Gaussian merMod object from lme4::lmer.}

\item{partvars}{Character vector specifying the predictors for which to partition the R2.}

\item{R2_type}{"marginal" or "conditional"}

\item{nboot}{Number of parametric bootstraps for interval estimation
(defaults to NULL). Larger numbers of bootstraps give a better
asymtotic CI, but may be time-consuming. Bootstrapping can be switch on by setting
\code{nboot = 1000}.}

\item{CI}{Width of the required confidence interval between 0 and 1 (defaults to
0.95).}
}
\value{
Returns an object of class \code{partR2} that is a a list with the following elements:
\item{call}{model call}
\item{datatype}{Response distribution (here: 'Gaussian').}
\item{R2_type}{Marginal or conditional R2}
\item{R2_df}{R2 and confidence interval}
\item{R2_boot}{Parametric bootstrap samples for R2}
\item{CC_df}{Commonality coefficients (unique and common R2) and confidence intervals}
\item{SC_df}{Structure coefficients (correlation between predicted response Yhat and the predictors specified in partvars) and confidence intervals}
\item{SC_boot}{Parametric bootstrap samples for the SCs}
\item{partvars}{predictors to partition}
\item{CI}{Coverage of the confidence interval as specified by the \code{CI} argument.}
}
\description{
R2, commonality coefficients and structure coefficients for gaussian lme4 models.
}
\examples{

# load data
data(BeetlesFemale)
library(lme4)
# Note: nboot and npermut are set to 0 for speed reasons.

# estimating adjusted repeatabilities for two random effects
mod <- glmer(Egg ~ Treatment + Habitat + (1|Container) + (1|Population),
                  data = BeetlesFemale, family = poisson)

R2 <- partPoisson_broom(mod, partvars = c("Treatment", "Habitat"),
                   R2_type = "marginal", nboot = 20, CI = 0.95,
                   link = "log", expect = "meanobs")
R2

# unadjusted repeatabilities with  fixed effects and
# estimation of the fixed effect variance
rptPoisson(Egg ~ Treatment + (1|Container) + (1|Population),
                   grname=c("Container", "Population", "Fixed"),
                   data=BeetlesFemale, nboot=0, npermut=0, adjusted=FALSE)


# variance estimation of random effects, residual and overdispersion
rptPoisson(formula = Egg ~ Treatment + (1|Container) + (1|Population) ,
                   grname=c("Container","Population","Residual", "Overdispersion"),
                   data = BeetlesFemale, nboot=0, npermut=0, ratio = FALSE)

}
\references{
Nakagawa, S., & Schielzeth, H. (2013). \emph{A general and simple method for obtaining R2 from
generalized linear mixedâ€effects models}. Methods in Ecology and Evolution, 4(2), 133-142.

Newton, R. G., & Spurrell, D. J. (1967).  \emph{A development of multiple regression for the
analysis of routine data. Applied Statistics}. 51-64.
}
